<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Neon Interactive Story - Blue</title>
<style>
:root{ --neon:#0099ff; --aqua:#33ccff; --bg:#0a0a0f; --fg:#f5f5f5; --muted:#aaaaaa }
*{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--fg);display:flex;flex-direction:column;height:100vh}
header{padding:18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
h1{margin:0;color:var(--neon);text-shadow:0 0 8px var(--neon),0 0 20px var(--aqua)}
.controls{display:flex;align-items:center;gap:8px}
button,select{background:var(--neon);color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;box-shadow:0 0 8px var(--neon)}
#view{flex:1;overflow:auto;padding:18px;border-top:1px solid rgba(255,255,255,.03)}
.chapter{font-size:20px;color:var(--neon);font-weight:800;margin:6px 0 14px;padding-top:8px}
.line{margin:8px 0;line-height:1.5}
.speaker{font-weight:700;color:var(--aqua);margin-right:8px;text-shadow:0 0 6px var(--aqua)}
.narrator{color:var(--muted);font-style:italic}
.footer{padding:10px 18px;font-size:12px;color:var(--muted);background:linear-gradient(180deg,transparent,rgba(0,0,0,.2))}
</style>
</head>
<body>
<header>
  <h1>Museo</h1>
  <div class="controls">
    <button id="prev">Prev</button>
    <button id="next">Next</button>
    <button id="auto">Auto</button>
    <select id="speed"><option value="2200">Slow</option><option value="1400" selected>Normal</option><option value="800">Fast</option></select>
    <button id="restart">Restart</button>
  </div>
</header>
<main id="view" aria-live="polite"></main>
<div class="footer">Theme: Blue neon â€¢ Progress auto-saved</div>

<script src="Samp.js"></script>
<script>
const view = document.getElementById('view');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const autoBtn = document.getElementById('auto');
const restartBtn = document.getElementById('restart');
const speedSel = document.getElementById('speed');

let idx = 0;
let timer = null;

function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function render(index) {
  view.innerHTML = '';
  const item = story[index];
  if (!item) return;
  if (item.type === 'chapter') {
    const h = document.createElement('h1');
    h.className = 'chapter';
    h.textContent = item.text;
    view.appendChild(h);
  } else if (item.speaker && item.speaker !== 'Narrator') {
    const d = document.createElement('div');
    d.className = 'line';
    d.innerHTML = '<span class="speaker">' + escapeHtml(item.speaker) + ':</span> ' + escapeHtml(item.text);
    view.appendChild(d);
  } else {
    const p = document.createElement('p');
    p.className = 'narrator';
    p.textContent = item.text;
    view.appendChild(p);
  }
  saveProgress();
  view.scrollTop = 0;
}

function showNext(){ if (idx < story.length-1) idx++; render(idx); if (idx>=story.length-1) stopAuto(); }
function showPrev(){ if (idx>0) idx--; render(idx); }
function restart(){ idx = 0; render(idx); stopAuto(); localStorage.removeItem('story_progress'); }
function startAuto(){ if (timer) return; autoBtn.textContent='Pause'; timer = setInterval(()=>{ showNext(); }, Number(speedSel.value)); }
function stopAuto(){ autoBtn.textContent='Auto'; clearInterval(timer); timer=null; }
function toggleAuto(){ if (timer) stopAuto(); else startAuto(); }

prevBtn.addEventListener('click', showPrev);
nextBtn.addEventListener('click', showNext);
autoBtn.addEventListener('click', toggleAuto);
restartBtn.addEventListener('click', restart);
speedSel.addEventListener('change', ()=>{ if (timer){ stopAuto(); startAuto(); } });

function saveProgress(){ try{ localStorage.setItem('story_progress', String(idx)); }catch(e){} }
function loadProgress(){ try{ const v = Number(localStorage.getItem('story_progress')||'0'); if (!isNaN(v) && v>=0 && v < story.length){ idx = v; } }catch(e){} }

// Init
loadProgress();
render(idx);
</script>
</body>
</html>
